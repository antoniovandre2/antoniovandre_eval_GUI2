# Proprietário: Antonio Vandré Pedrosa Furtunato Gomes (bit.ly/antoniovandre_legadoontologico).

# Projeto Mathematical Ramblings (bit.ly/mathematicalramblings_github).

# Arquivo meta para o Python GUI para "antoniovandre_eval", versão de distribuição.

# Última atualização: 03-07-2024.

import tkinter as tk

from tkinter import *

import os

import subprocess

from pathlib import Path

window = Tk ()

window.geometry('410x150')

window.resizable (False, False)

bgimage = PhotoImage (file="/usr/share/antoniovandre_eval_gui_bgimage.png")

bglabel = Label (window, image=bgimage)

bglabel.place (x=0, y=0, relwidth=1, relheight=1)

window.title ("antoniovandre_eval GUI")

lbl_entre = Label (window, text="ENTREEXPRESSAO:")

lbl_entre.place (anchor='w', rely=.1)

txt = Entry (window, width=50)

txt.place (anchor='w', rely=.3)

lbl_resultado = Label (window, text="RESULTADO:")

lbl_resultado.place (anchor='w', rely=.7)

lbl_saida = Label (window, text="ENTREEXPRESSAOCLIQUE.")

lbl_saida.place (anchor='w', rely=.9)

def clicked ():

	"""	Escopo opcional.

	cmd = 'antoniovandre_eval \'' + txt.get() + '\' 0 > avevtemp'

	os.system (cmd)

	with open ("avevtemp", "r") as f:
		string = f.read ()

	lbl_saida.configure (text=string.rstrip("\n"))

	os.system ('rm avevtemp')
	
	"""

	cmd = 'antoniovandre_eval \'' + txt.get() + '\' 0'

	processo = subprocess.Popen (cmd, shell=True, stdout=subprocess.PIPE)

	processo_return = processo.stdout.read ()

	lbl_saida.configure (text=processo_return.decode('UTF-8').rstrip("\n"))

def clicked2 ():

	with open ("/usr/share/antoniovandre_sobre.txt", "r") as fa:
		stringajuda = fa.read ()

	cmd = 'wget -T TIMEOUTMENSAGEM -qO- https://bit.ly/antoniovandreevalguimensagemdl 2>> /dev/null > '

	processo = subprocess.Popen (cmd, shell=True, stdout=subprocess.PIPE)

	processo_return = processo.stdout.read ()

	stringmensagem = processo_return.decode('UTF-8')

	windowajuda = Tk ()

	windowajuda.resizable (False, False)

	windowajuda.title ("antoniovandre_eval GUI AJUDA")

	S = tk.Scrollbar (windowajuda)

	T = tk.Text (windowajuda, height=30, width=100)

	S.pack (side=tk.RIGHT, fill=tk.Y)

	T.pack (side=tk.LEFT, fill=tk.Y)

	S.config (command=T.yview)

	T.config (yscrollcommand=S.set)

	T.insert (tk.INSERT, stringajuda)

	T.insert (tk.INSERT, stringmensagem)

	windowajuda.mainloop ()

def clicked3 ():

	quit ()

btn_calcular = Button (window, text="CALCULAR", command=clicked)

btn_calcular.place (anchor='center', relx=.2, rely=.5)

btn_ajuda = Button (window, text="MAJUDA", command=clicked2)

btn_ajuda.place (anchor='center', relx=.5, rely=.5)

btn_exit = Button (window, text="SAIR", command=clicked3)

btn_exit.place (anchor='center', relx=.8, rely=.5)

window.mainloop ()
